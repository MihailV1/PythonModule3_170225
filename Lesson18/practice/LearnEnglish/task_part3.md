## Техническое задание: Консольное приложение "Обучение английскому языку" - Часть 3: Статистика и Прогресс

---

### 1. Общие сведения и Дополнения к Существующему Функционалу

Третья часть разработки приложения "Английский для новичков" направлена на внедрение системы отслеживания и хранения статистики по ответам пользователя в режиме тестирования. Это позволит пользователю видеть свой прогресс и определять "проблемные" слова.

* **Цель:** Расширить функционал тестирования, добавив запись результатов каждого ответа в базу данных, и предоставить пользователю возможность просмотра агрегированной статистики.
* **Используемые технологии:** Python, SQLite (с обновлённой структурой БД), модуль `datetime` для фиксации времени.

---

### 2. Функциональные Требования: Расширение Режима Тестирования (`start_test`)

Функция `start_test` должна быть дополнена следующим функционалом:

#### 2.1. Фиксация Результата Ответа

* После каждого ответа пользователя (правильного или неправильного) в режиме теста, информация о результате должна быть записана в новую таблицу базы данных `answers`.
* **Сохраняемая информация:**
    * **ID слова:** Уникальный идентификатор слова, по которому был задан вопрос (ссылка на `words.id`).
    * **Дата и время:** Точная дата и время ответа (timestamp).
    * **Тип теста:** Указать, был ли это тест "Английский -> Русский" или "Русский -> Английский" (если этот функционал будет реализован). На текущем этапе можно считать, что это всегда "Английский -> Русский".
    * **Результат:** `1` для правильного ответа, `0` для неправильного.

#### 2.2. Отображение Статистики за Сессию

* После завершения каждого тестового сеанса (`start_test`), приложение должно выводить краткую статистику по этой конкретной сессии:
    * Общее количество заданных вопросов.
    * Количество правильных ответов.
    * Количество неправильных ответов.
    * Процент правильных ответов за сессию.

---

### 3. Функциональные Требования: Просмотр Статистики (Новые Функции Меню)

Необходимо добавить новые пункты в главное меню приложения для просмотра статистики.

#### 3.1. "Посмотреть общую статистику по словам" (Новая функция)

* При выборе этой опции, приложение должно отобразить **агрегированную статистику** для *каждого* слова в словаре.
* Для каждого слова (в формате "Английское слово - Русский перевод"):
    * Общее количество вопросов, заданных по этому слову.
    * Количество правильных ответов по этому слову.
    * Количество неправильных ответов по этому слову.
    * Процент правильных ответов по этому слову (если было хотя бы 1 вопрос).

#### 3.2. "Посмотреть слова с проблемами" (Новая функция)

* При выборе этой опции, приложение должно отобразить список "проблемных" слов.
* "Проблемные" слова определяются как те слова, по которым пользователь чаще всего ошибается (например, имеют наименьший процент правильных ответов или наибольшее количество неправильных ответов).
* Требуется вывести топ N (например, топ 5 или 10) таких слов, отсортированных по убыванию количества неправильных ответов или по возрастанию процента правильных.

---

### 4. Технические Требования: Изменения в Базе Данных

* **Новая таблица:** `answers`
* **Структура таблицы `answers`:**
    * `id` (INTEGER PRIMARY KEY AUTOINCREMENT)
    * `word_id` (INTEGER, NOT NULL) - Внешний ключ, ссылающийся на `words.id`.
    * `timestamp` (TEXT, NOT NULL) - Дата и время ответа (рекомендуется формат ISO 8601, например, `YYYY-MM-DD HH:MM:SS`).
    * `is_correct` (INTEGER, NOT NULL) - Результат ответа: `1` для правильного, `0` для неправильного.
* **Внешний ключ:** Убедиться, что `word_id` в таблице `answers` корректно ссылается на `words.id`.

---

### 5. Ход Выполнения (Рекомендуемые Шаги)

1.  **Обновление `init_db`:** Модифицировать `init_db` для создания новой таблицы `answers` при инициализации базы данных.
2.  **Обновление `start_test`:**
    * Получать `id` слова из таблицы `words` при выборе слова для теста.
    * После каждого ответа, вставлять новую запись в таблицу `answers` со всеми необходимыми полями.
    * Реализовать сбор статистики (правильные/неправильные) *внутри* функции `start_test` для текущей сессии и выводить её в конце.
3.  **Создание `view_overall_stats(cursor: sqlite3.Cursor)`:** Разработать новую функцию для получения и агрегации данных из `words` и `answers` для отображения общей статистики по каждому слову. Потребуются SQL-запросы с `JOIN` и `GROUP BY`.
4.  **Создание `view_problem_words(cursor: sqlite3.Cursor)`:** Разработать новую функцию, которая будет запрашивать данные из `answers`, агрегировать их (например, по проценту правильных ответов) и выводить список "проблемных" слов.
5.  **Обновление `main_menu`:** Добавить новые пункты меню, которые будут вызывать `view_overall_stats` и `view_problem_words`.
6.  **Обработка ошибок:** Убедиться, что все новые функции корректно обрабатывают возможные ошибки базы данных (например, используя `try-except`).