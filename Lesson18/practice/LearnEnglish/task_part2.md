# Техническое задание: Консольное приложение "Обучение английскому языку" - Часть 2: Тестирование

---

### 1. Общие сведения и Дополнения к Существующему Функционалу

Вторая часть разработки приложения "Английский для новичков" сосредоточена на обеспечении качества кода путем создания автоматизированных тестов с использованием фреймворка Pytest. Тестирование будет охватывать уже реализованный функционал управления словами и базовый режим обучения.

* **Цель:** Создать набор тестов для проверки корректности работы основных функций приложения и его взаимодействия с базой данных.
* **Используемые технологии:** Python, SQLite, Pytest.
* **Особые требования:** Для тестов должна использоваться временная база данных (SQLite in-memory) или тестовая файловая база данных, чтобы тесты были независимыми и не влияли на основную базу данных приложения.

---

### 2. Функциональные Требования: Тестирование

Для каждой из следующих функций должны быть написаны тесты, охватывающие как успешные сценарии, так и сценарии с ошибками/крайними случаями:

#### 2.1. Тестирование `init_db()`

* **Успешный сценарий:** Проверить, что функция **корректно создает базу данных** и таблицу `words` при первом запуске.
* **Повторный запуск:** Убедиться, что функция **не вызывает ошибок** и не повреждает существующую базу данных при повторном вызове.

#### 2.2. Тестирование `add_word()`

* **Успешное добавление:** Проверить, что слово и его перевод **корректно добавляются** в базу данных.
* **Дублирование слова:** Убедиться, что попытка добавить уже существующее английское слово **вызывает ожидаемую ошибку** (например, `ValueError` или `sqlite3.IntegrityError`).
* **Пустые значения:** Проверить, что передача пустых строк в качестве английского слова или русского перевода **вызывает ожидаемую ошибку** (например, `ValueError`).
* **Регистронезависимость:** Проверить, что слова "Hello" и "hello" считаются **одним и тем же словом** (т.е. добавление "Hello" после "hello" должно вызвать ошибку дублирования).

#### 2.3. Тестирование `view_words()`

* **Пустой словарь:** Проверить, что функция **корректно обрабатывает пустой словарь** (выводит соответствующее сообщение, а не ошибку).
* **Непустой словарь:** Проверить, что функция **извлекает и отображает все добавленные слова** в правильном формате (например, можно протестировать через мокирование `print` или проверку возвращаемых значений, если функция будет изменена для возврата данных).
* **Порядок слов:** Убедиться, что слова **отображаются в отсортированном порядке** (по английскому слову, как указано в запросе `ORDER BY english_word`).

#### 2.4. Тестирование `delete_word()`

* **Успешное удаление:** Проверить, что слово **корректно удаляется** из базы данных.
* **Удаление несуществующего слова:** Убедиться, что попытка удалить слово, которого нет в словаре, **обрабатывается корректно** (например, выводится сообщение о том, что слово не найдено, без ошибок).
* **Пустой ввод:** Проверить, что передача пустой строки в качестве слова для удаления **обрабатывается корректно** (выводится сообщение об ошибке ввода).

---

### 3. Технические Требования: Pytest

* **Использование фикстур:** Должна быть создана **Pytest-фикстура**, которая настраивает временную базу данных (например, `:memory:` или временный файл) перед каждым тестом и очищает ее после. Это гарантирует независимость тестов.
* **Изоляция тестов:** Каждый тест должен быть **изолирован**, т.е. его выполнение не должно влиять на результаты других тестов.
* **Обработка исключений:** Тесты должны проверять, что функции **корректно выбрасывают ожидаемые исключения** (`pytest.raises`).
* **Структура тестов:** Тесты должны быть организованы в отдельных файлах и иметь осмысленные имена.

---

### 4. Ход Выполнения

1. Установить `pytest`.
2. Разработать фикстуру для управления тестовой базой данных.
3. Написать отдельные тестовые функции для каждой указанной операции (`init_db`, `add_word`, `view_words`, `delete_word`).
4. Запустить тесты и убедиться, что все они проходят.